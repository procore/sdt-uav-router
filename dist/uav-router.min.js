"use strict";!function(){var e,n;function a(e){if(!e)return"";var a=[];return Object.keys(e).forEach(function(n){void 0!==e[n]&&a.push(encodeURIComponent(n)+"="+encodeURIComponent(e[n]))}),a.join("&")}function r(n){var e={};return decodeURIComponent(n).split("&").forEach(function(n){(n=n.split("="))[0]&&(e[n[0]]=n[1])}),e}function o(){return!h.canNavigate||h.canNavigate()}function t(){h.params=r(location.hash.substring(1))}function i(){var n=a(h.params);!e&&location.hash.substring(1)!==n&&o()&&(e=!0,requestAnimationFrame(function(){location.hash=n}))}function c(n){if(e)e=!1;else{if(!o())return e=!0,location.hash=a(h.params),n.preventDefault();t(),h.load()}}function u(n){return"string"==typeof n&&(n=r(n)),n||{}}function f(n){var e=Object.keys(n),a=Object.keys(h.params);if(e.length!==a.length)return!0;for(var r=e.length>a.length?e:a,o=0;o<r.length;o++)if(h.params[r[o]]!==n[r[o]])return!0}function s(e){var a;return e=u(e),Object.keys(e).forEach(function(n){h.params[n]!==e[n]&&(a=!0,h.params[n]=e[n])}),a}function l(){var n="#"+a(h.params);location.hash!==n&&o()&&history.replaceState(void 0,void 0,n)}function p(n){var e;return n.forEach(function(n){void 0!==h.params[n]&&(e=!0,delete h.params[n])}),e}var m={remove:function(){for(var n=arguments.length,e=new Array(n),a=0;a<n;a++)e[a]=arguments[a];p(e)&&m.set(h.params,!0)},removeReplace:function(){for(var n=arguments.length,e=new Array(n),a=0;a<n;a++)e[a]=arguments[a];p(e)&&l()},merge:function(n){s(n)&&i()},set:function(n,e){n=u(n),(e||f(n))&&(h.params=n,i())},replace:function(n){f(n=u(n))&&(h.params=n,l())},mergeReplace:function(n){s(n)&&l()}},h={params:{},url:m,load:function(){h.app&&!n&&o()&&(n=!0,requestAnimationFrame(function(){n=!1,h.app(h.params)}))},init:function(n){location.search?location.href=location.href.replace("#","&").replace("?","#"):(h.app=n,window.addEventListener("hashchange",c),t(),h.load())},remove:function(){for(var n=arguments.length,e=new Array(n),a=0;a<n;a++)e[a]=arguments[a];p(e),i(),h.load()},removeReplace:function(){for(var n=arguments.length,e=new Array(n),a=0;a<n;a++)e[a]=arguments[a];p(e),l(),h.load()},merge:function(n){s(n),i(),h.load()},set:function(n){h.params=u(n),i(),h.load()},replace:function(n){h.params=u(n),l(),h.load()},mergeReplace:function(n){s(n),l(),h.load()}};window.uav=window.uav||{},window.uav.router=h,"undefined"!=typeof module&&module.exports&&(module.exports=h)}();